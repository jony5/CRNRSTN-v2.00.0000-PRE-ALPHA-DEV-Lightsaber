<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>CRNRSTN :: Code Example</title></head><body><p>The custom database_integration :: class in the example below serves as the primary interface between the web services layer used in the examples on this site and the MySQL database. Any request that is to come to the database will passes through an instance of this class object.<br />
<br />
The three (3) public methods on lines 25-39 support three use cases through which database dependent functionality can be invoked. Each public method receives the C<span class="the_R">R</span>NRSTN Suite :: environmentals class object ($oCRNRSTN_ENV) which gives this custom class access to all of the C<span class="the_R">R</span>NRSTN Suite :: functionality. For the purposes of the user authentication and search result suggestions examples on this site, the svc_searchResultsSuggest() and svc_isValidLoginData() methods in this example are the public handles.<br />
<br />
The instantiation of the mysqli_conn_manager :: class object occurs within the constructor of the <a href="../../classes/environmentals/" target="_self">environmentals</a> class object when the C<span class="the_R">R</span>NRSTN Suite is configured. This custom database_integration :: class does not have its' own copy of the $oCRNRSTN_ENV object...nor does it know what environment it is running within; the user of the database (in this case the web services manager) passes its' own copy of the <a href="../../classes/environmentals/" target="_self">environmentals</a> :: class object ($oCRNRSTN_ENV) as one of the parameters ...along with itself...when invoking the database_integration :: class methods.<br />
<br />
This <a href="../../classes/environmentals/" target="_self">environmentals</a> :: class object...$oCRNRSTN_ENV...is then used to access to all the necessary mysqli_conn_manager methods within the database_integrations :: class object to manage and execute against the...potentially... environmentally specific MySQL database connectivity. This custom database integrations class object <strong>never needs to know within what environment it is running</strong>. This information is managed within the C<span class="the_R">R</span>NRSTN Suite ::.</p><div id="crnrstn_3f39a238f4e61db4f882_0" class="code_wrapper"><div id="lineNum_956364888" class="l_num">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178<br>179<br>180<br>181<br>182<br>183<br>184<br>185<br>186<br>187<br>188<br>189<br>190<br>191<br>192<br>193<br>194<br>195<br>196<br>197<br>198<br>199<br>200<br>201<br>202<br>203<br>204<br>205<br>206<br>207<br>208<br>209<br>210<br>211<br>212<br>213<br>214<br>215<br>216<br>217<br>218<br>219<br>220<br>221<br>222<br>223<br>224<br>225<br>226<br>227<br>228<br>229<br>230<br>231<br><br><br><br><br></div><div class="code_shell"><code>
<span class="code_str_qtd">&lt;?php</span><br><span CLASS="code_comment">
/* </span><br><span CLASS="code_comment">
// J5</span><br>
<span CLASS="code_comment">// Code is Poetry */</span><br>
<br>
<span id="960a760d0d8d8b8f4803_1416184719j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">class</span> database_integration {<br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_2139223214j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j00000101952632514" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $oLogger;<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_1803527565j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j000001011084851771" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $query;<br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_458910550j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j00000101462170619" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $query_elements;<br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_808538507j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j00000101106457664" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $result;<br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_12753788j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j000001011187450346" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $result_ARRAY = <span id="d3b3ef3a4ad62b6d8bdc_j00000101461137429" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">array</span>();<br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_1816995812j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="719dc38910f731c12940_j00000101563172193" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> $fieldName_ARRAY = <span id="d3b3ef3a4ad62b6d8bdc_j00000101972229251" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">array</span>();<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span id="a5a78fdbd379ad0fba15_1210595114j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span id="2a824b20b18cc45dbde0_j000001011864737013" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> __construct() {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// INSTANTIATE LOGGER</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_572252664j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(!<span id="8a854f2276292f7697c0_j00000101925558197" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">isset</span>(self::$oLogger)){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$oLogger = <span id="f109c58b6897e5839fe2_1722556035j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> logging();<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span>}<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// USER SERVICES REQUEST TO RETRIEVE SUGGESTED SEARCH RESULTS</span><br>
<span CLASS="tab">&nbsp;</span><span id="a5a78fdbd379ad0fba15_2055827014j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span id="2a824b20b18cc45dbde0_j000001011879524889" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> svc_searchResultsSuggest($oUser, $oCRNRSTN_ENV){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_431158178j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> $this-&gt;dbQuery(<span class="code_str_qtd">'svc_suggestSearch'</span>, $oCRNRSTN_ENV, $oUser);<br>
<span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// USER SERVICES REQUEST TO VALIDATE USER LOGIN CREDENTIALS</span><br>
<span CLASS="tab">&nbsp;</span><span id="a5a78fdbd379ad0fba15_516433886j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span id="2a824b20b18cc45dbde0_j00000101550762808" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> svc_isValidLoginData($oUser, $oCRNRSTN_ENV){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_1024006472j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> $this-&gt;dbQuery(<span class="code_str_qtd">'svc_isValidLoginData'</span>, $oCRNRSTN_ENV, $oUser);<br>
<span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// USER SERVICES REQUEST TO CREATE NEW USER</span><br>
<span CLASS="tab">&nbsp;</span><span id="a5a78fdbd379ad0fba15_1803344558j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span id="2a824b20b18cc45dbde0_j00000101227122843" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> svc_creatNewUser($oUser, $oCRNRSTN_ENV){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_2049263769j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> $this-&gt;dbQuery(<span class="code_str_qtd">'svc_creatNewUser'</span>, $oCRNRSTN_ENV, $oUser);<br>
<span CLASS="tab">&nbsp;</span>}<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PROCESS QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span id="02d8f1524c3ba5ffa677_1682224309j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span id="2a824b20b18cc45dbde0_j000001011183487731" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> dbQuery($queryType, $oCRNRSTN_ENV, $oUser){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="2b377a23c22576d4ae5a_1317964840j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">try</span>{<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$ts = <span id="d4830d469964080b55ca_1673963876j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">date</span>(<span class="code_str_qtd">"Y-m-d H:i:s"</span>, <span id="0e7d9dc9993d0bba7c74_2136120245j00000101" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">time</span>()-60*60*6);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// OPEN DATABASE CONNECTION</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$mysqli = $oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;returnConnection();<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e03b0e0956383a796e22_974008757j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">switch</span>($queryType){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="51b9236800eb72e9397c_611331999j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">case</span> <span class="code_str_qtd">'svc_suggestSearch'</span>:<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query = <span class="code_str_qtd">''</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$skip_str_ARRAY = <span id="d3b3ef3a4ad62b6d8bdc_447547147j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">array</span>(<span class="code_str_qtd">'a'</span>, <span class="code_str_qtd">'the'</span>, <span class="code_str_qtd">'i'</span>, <span class="code_str_qtd">'and'</span>, <span class="code_str_qtd">'but'</span>);<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$tmp_search_params = $oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'SEARCH_PARAM'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$pos = <span id="2a885993352e89789e64_1436179376j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strpos</span>($tmp_search_params, <span class="code_str_qtd">'&quot;'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_1419870506j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>($pos===false){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SEARCH ON INDIVIDUAL WORDS</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$tmp_search_param_ARRAY = <span id="530ec2d634902de83c9f_554004812j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">explode</span>(<span class="code_str_qtd">' '</span>,$mysqli-&gt;real_escape_string($tmp_search_params));<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// BUILD QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="9c79be84cf595ca0ad6a_1448933164j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">foreach</span>($tmp_search_param_ARRAY as $key=&gt;$val){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_459837204j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(!<span id="701dd6f2893aff641f80_j000001011015142241" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">in_array</span>($val, $skip_str_ARRAY)){<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_class`.`NAME`, `crnrstn_class`.`DESCRIPTION` FROM `crnrstn_class` WHERE `crnrstn_class`.`NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `crnrstn_class`.`DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `NAME`,`DESCRIPTION` FROM `crnrstn_method` WHERE `NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DEFINITION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `RETURNED_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `TITLE`,`DESCRIPTION` FROM `crnrstn_examples` WHERE `TITLE_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `EXAMPLE_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_params`.`NAME`,`crnrstn_params`.`DESCRIPTION` FROM `crnrstn_params` WHERE `crnrstn_method`.`NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `crnrstn_method`.`DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_techspecs`.`NAME` FROM `crnrstn_techspecs` WHERE `crnrstn_techspecs`.`TECHSPEC_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="e065810be95e4c37e63c_1118445329j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span>{<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$val = $mysqli-&gt;real_escape_string($tmp_search_params);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_1023009397j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(!<span id="701dd6f2893aff641f80_j000001011987371492" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">in_array</span>($val, $skip_str_ARRAY)){<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_class`.`NAME`, `crnrstn_class`.`DESCRIPTION`,`crnrstn_class`.`URI` FROM `crnrstn_class` WHERE `crnrstn_class`.`NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `crnrstn_class`.`DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `NAME`,`DESCRIPTION` FROM `crnrstn_method` WHERE `NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DEFINITION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `RETURNED_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `TITLE`,`DESCRIPTION` FROM `crnrstn_examples` WHERE `TITLE_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `EXAMPLE_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_params`.`NAME`,`crnrstn_params`.`DESCRIPTION` FROM `crnrstn_params` WHERE `crnrstn_method`.`NAME` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot; OR `crnrstn_method`.`DESCRIPTION_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query .= <span class="code_str_qtd">'SELECT `crnrstn_techspecs`.`NAME` FROM `crnrstn_techspecs` WHERE `crnrstn_techspecs`.`TECHSPEC_SEARCH` LIKE &quot;%'</span>.$val.<span class="code_str_qtd">'%&quot;;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PROCESS QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$mysqli = $oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;processMultiQuery($mysqli, self::$query);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_181556795j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>($mysqli-&gt;error){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_740262762j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span id="f109c58b6897e5839fe2_j00000101412140508" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> Exception(<span class="code_str_qtd">'CRNRSTN database_integration :: '</span>.$queryType.<span class="code_str_qtd">' ERROR :: ['</span>.$mysqli-&gt;error.<span class="code_str_qtd">']'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="e065810be95e4c37e63c_1107114992j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span>{<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// REMAIN STILL WHILE YOUR LIFE IS EXTRACTED</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$ROWCNT=0;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="872cfc9a1081865422ac_315335149j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">do</span> {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_320483874j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> (self::$result = $mysqli-&gt;store_result()) {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6db63a87b4fbbd1f1255_839156233j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">while</span> ($row = self::$result-&gt;fetch_row()) {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="9c79be84cf595ca0ad6a_746493327j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">foreach</span>($row as $fieldPos=&gt;$value){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// STORE RESULT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result_ARRAY[$ROWCNT][$fieldPos]=$value;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$ROWCNT++;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result-&gt;free();<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_836917760j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> ($mysqli-&gt;more_results()) {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// END OF RECORD. MORE TO FOLLOW.</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>} <span id="6db63a87b4fbbd1f1255_1389919041j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">while</span> ($mysqli-&gt;next_result());<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CHECK FOR ANY ERROR IN SQL RESULT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_1770499799j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>($mysqli-&gt;error){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_492778671j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span id="f109c58b6897e5839fe2_j000001011617041884" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> Exception(<span class="code_str_qtd">'CRNRSTN Exception :: ERROR :: ['</span>.$mysqli-&gt;error.<span class="code_str_qtd">']'</span>);<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CLOSE CONNECTION</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// RETURN RESULT SET ARRAY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_1672279920j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> self::$result_ARRAY;<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="d0ded82fb167bc6b8ca4_27519332j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">break;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="51b9236800eb72e9397c_653045967j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">case</span> <span class="code_str_qtd">'svc_isValidLoginData'</span>:<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query = <span class="code_str_qtd">'SELECT `users`.`USERNAME`,`users`.`ISACTIVE`,`users`.`USERNAME_DISPLAY`,`users`.`EMAIL`,`users`.`PWDHASH`,`users`.`USER_PERMISSIONS_ID`,`users`.`LANGCODE`,`users`.`LOGIN_CNT`,`users`.`SESSION_PERSIST`,`users`.`IMAGE_NAME`,`users`.`IMAGE_WIDTH`,`users`.`IMAGE_HEIGHT`,`users`.`EXTERNAL_URI_FORMATTED` FROM `users` WHERE `users`.`USERNAME`=&quot;'</span>.$mysqli-&gt;real_escape_string(<span id="008b62deb4978430e9f8_842761112j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>))).<span class="code_str_qtd">'&quot; AND `users`.`USERNAME_CRC32`=&quot;'</span>.<span id="87c448981000856c9ee5_1701483208j00000101" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">crc32</span>(<span id="008b62deb4978430e9f8_j00000101641682564" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>))).<span class="code_str_qtd">'&quot; LIMIT 1;'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PROCESS QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result = $oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;processQuery($mysqli, self::$query);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_1816769870j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>($mysqli-&gt;error){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_165331559j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span id="f109c58b6897e5839fe2_j000001011089229711" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> Exception(<span class="code_str_qtd">'CRNRSTN database_integration :: '</span>.$queryType.<span class="code_str_qtd">' ERROR :: ['</span>.$mysqli-&gt;error.<span class="code_str_qtd">']'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="e065810be95e4c37e63c_1105465598j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span>{<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// REMAIN STILL WHILE YOUR LIFE IS EXTRACTED</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$ROWCNT=0;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6db63a87b4fbbd1f1255_1585202065j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">while</span> ($row = self::$result-&gt;fetch_row()) {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="9c79be84cf595ca0ad6a_1643234523j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">foreach</span>($row as $fieldPos=&gt;$value){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// STORE RESULT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//error_log(services /database.inc.php (296) rowcnt[.$ROWCNT.] fieldPos[.$fieldPos.] value [.$value.]);</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result_ARRAY[$ROWCNT][$fieldPos]=$value;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$ROWCNT++;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result-&gt;free();<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// VERIFY LOGIN</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_406915115j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(password_verify($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'PWDHASH'</span>), self::$result_ARRAY[0][4])){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// WE HAVE VALID PASSWORD FOR ACCOUNT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// INCRMENT LOGIN COUNT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result_ARRAY[0][7]++;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CLOSE CONNECTION</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// RETURN RESULT SET ARRAY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_2045039269j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> self::$result_ARRAY;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="e065810be95e4c37e63c_510893116j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span>{<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PASSWORD INVALID</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CLOSE CONNECTION</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_1525360444j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> <span id="9c13212eecace0e8b16a_j00000101920565018" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">false;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="d0ded82fb167bc6b8ca4_350780960j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">break;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="51b9236800eb72e9397c_1706917239j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">case</span> <span class="code_str_qtd">'svc_creatNewUser'</span>:<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PREPARE HASHES</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$seednum_full = <span id="772cf4336b215c014188_1660827781j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">md5</span>($ts.<span id="008b62deb4978430e9f8_j00000101762921468" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>)));<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PREPARE QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$query = <span class="code_str_qtd">'INSERT INTO users (`USERNAME`,`USERID_SOURCE`,`USERNAME_CRC32`,`USERID`,`FIRSTNAME`,`LASTNAME`,`USERNAME_DISPLAY`,`EMAIL`,`EMAIL_CRC32`,`PWDHASH`,`LASTLOGIN`,`SESSION_PERSIST`,`DATEMODIFIED`) VALUES (&quot;'</span>.$mysqli-&gt;real_escape_string(<span id="008b62deb4978430e9f8_666548583j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>))).<span class="code_str_qtd">'&quot;,&quot;'</span>.$seednum_full.<span class="code_str_qtd">'&quot;,&quot;'</span>.<span id="87c448981000856c9ee5_1976162930j00000101" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">crc32</span>(<span id="008b62deb4978430e9f8_j000001011083405343" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>))).<span class="code_str_qtd">'&quot;,&quot;'</span>.<span id="87c448981000856c9ee5_1505704816j00000101" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">crc32</span>($seednum_full).<span class="code_str_qtd">'&quot;,&quot;'</span>.$mysqli-&gt;real_escape_string($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'FIRSTNAME'</span>)).<span class="code_str_qtd">'&quot;,&quot;'</span>.$mysqli-&gt;real_escape_string($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'LASTNAME'</span>)).<span class="code_str_qtd">'&quot;,&quot;'</span>.$mysqli-&gt;real_escape_string($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'USERNAME'</span>)).<span class="code_str_qtd">'&quot;,&quot;'</span>.$mysqli-&gt;real_escape_string(<span id="008b62deb4978430e9f8_575172610j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'EMAIL'</span>))).<span class="code_str_qtd">'&quot;,&quot;'</span>.<span id="87c448981000856c9ee5_1920323103j00000101" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">crc32</span>(<span id="008b62deb4978430e9f8_j00000101748140209" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span>($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'EMAIL'</span>))).<span class="code_str_qtd">'&quot;,&quot;'</span>.$oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'PWDHASH'</span>).<span class="code_str_qtd">'&quot;,&quot;'</span>.$ts.<span class="code_str_qtd">'&quot;,&quot;'</span>.$mysqli-&gt;real_escape_string($oUser-&gt;getReqParamByKey(<span class="code_str_qtd">'SESSION_PERSIST'</span>)).<span class="code_str_qtd">'&quot;,&quot;'</span>.$ts.<span class="code_str_qtd">'&quot;);'</span>;<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PROCESS QUERY</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$result = $oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;processQuery($mysqli, self::$query);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="e43e09b42c84b845c5a9_198188761j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>($mysqli-&gt;error){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_265618126j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span id="f109c58b6897e5839fe2_j00000101217698445" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> Exception(<span class="code_str_qtd">'CRNRSTN database_integration :: '</span>.$queryType.<span class="code_str_qtd">' ERROR :: ['</span>.$mysqli-&gt;error.<span class="code_str_qtd">']'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="e065810be95e4c37e63c_1870468682j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span>{<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CLOSE CONNECTION</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_293137459j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> <span id="afe3cb60c79e68b66c77_j00000101870744412" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">true;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="d0ded82fb167bc6b8ca4_565746146j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">break;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>default:<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// HOOOSTON...VE HAF PROBLEM!</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_1994620667j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span id="f109c58b6897e5839fe2_j000001011512426976" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> Exception(<span class="code_str_qtd">'Key provided for dbQuery() does not exist in the system.'</span>);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="d0ded82fb167bc6b8ca4_235032368j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">break;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<span id="149d7ffebeb55ab05d07_12468579j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">catch</span>( Exception $e ) {<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SEND THIS THROUGH THE LOGGER OBJECT</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>self::$oLogger-&gt;captureNotice(<span class="code_str_qtd">'database_integration-&gt;dbQuery()'</span>, <span id="1167c87443e132c6048b_454173039j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">LOG_EMERG</span>, $e-&gt;getMessage());<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span id="b0240c0e5329b517611f_1340497967j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> <span id="9c13212eecace0e8b16a_j000001011597670644" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">false;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// IF WE GET THIS FAR...</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span>$oCRNRSTN_ENV-&gt;oMYSQLI_CONN_MGR-&gt;closeConnection($mysqli);<br>
<span CLASS="tab">&nbsp;</span>}<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span id="a5a78fdbd379ad0fba15_2097407563j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span id="2a824b20b18cc45dbde0_j000001011747413082" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> __destruct() {<br>
<br>
<span CLASS="tab">&nbsp;</span>}<br>
}<br>
<br>
<span class="code_str_qtd">?&gt;</span><br>
</code></div></div><div strlen="64897" class="example_title_wrapper"><code style="color:#FF0000;">Figure 31.</code></div><div class="cb_15"></div><div class="comment_tt_wrapper"><span id="960a760d0d8d8b8f4803_0239260001529240201j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">class</span> <span class="code_tt_space">&nbsp;</span><span id="02d8f1524c3ba5ffa677_0243324001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">private</span> <span class="code_tt_space">&nbsp;</span><span id="719dc38910f731c12940_j000001010244143001529240201" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">static</span> <span class="code_tt_space">&nbsp;</span><span id="d3b3ef3a4ad62b6d8bdc_j000001010269943001529240201" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">array</span> <span class="code_tt_space">&nbsp;</span><span id="a5a78fdbd379ad0fba15_0284472001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">public</span> <span class="code_tt_space">&nbsp;</span><span id="2a824b20b18cc45dbde0_j000001010284789001529240201" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">function</span> <span class="code_tt_space">&nbsp;</span><span id="e43e09b42c84b845c5a9_0311279001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> <span class="code_tt_space">&nbsp;</span><span id="8a854f2276292f7697c0_j000001010311784001529240201" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">isset</span> <span class="code_tt_space">&nbsp;</span><span id="f109c58b6897e5839fe2_0326355001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> <span class="code_tt_space">&nbsp;</span><span id="b0240c0e5329b517611f_0366545001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">return</span> <span class="code_tt_space">&nbsp;</span><span id="2b377a23c22576d4ae5a_0479227001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">try</span> <span class="code_tt_space">&nbsp;</span><span id="d4830d469964080b55ca_0491122001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">date</span> <span class="code_tt_space">&nbsp;</span><span id="0e7d9dc9993d0bba7c74_0492182001529240201j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">time</span> <span class="code_tt_space">&nbsp;</span><span id="e03b0e0956383a796e22_0545417001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">switch</span> <span class="code_tt_space">&nbsp;</span><span id="51b9236800eb72e9397c_0559130001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">case</span> <span class="code_tt_space">&nbsp;</span><span id="2a885993352e89789e64_0630640001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strpos</span> <span class="code_tt_space">&nbsp;</span><span id="530ec2d634902de83c9f_0732137001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">explode</span> <span class="code_tt_space">&nbsp;</span><span id="9c79be84cf595ca0ad6a_0817108001529240201j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">foreach</span> <span class="code_tt_space">&nbsp;</span><span id="701dd6f2893aff641f80_j000001010844057001529240201" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">in_array</span> <span class="code_tt_space">&nbsp;</span><span id="e065810be95e4c37e63c_0057104001529240202j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">else</span> <span class="code_tt_space">&nbsp;</span><span id="6b7e9d5e9a9a8c5b887c_0394809001529240202j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">throw</span> <span class="code_tt_space">&nbsp;</span><span id="872cfc9a1081865422ac_0516860001529240202j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">do</span> <span class="code_tt_space">&nbsp;</span><span id="6db63a87b4fbbd1f1255_0569706001529240202j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">while</span> <span class="code_tt_space">&nbsp;</span><span id="d0ded82fb167bc6b8ca4_0371932001529240203j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">break;</span> <span class="code_tt_space">&nbsp;</span><span id="008b62deb4978430e9f8_0403519001529240203j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">strtolower</span> <span class="code_tt_space">&nbsp;</span><span id="87c448981000856c9ee5_0404959001529240203j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">crc32</span> <span class="code_tt_space">&nbsp;</span><span id="9c13212eecace0e8b16a_j000001010459987001529240204" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">false;</span> <span class="code_tt_space">&nbsp;</span><span id="772cf4336b215c014188_0604371001529240204j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">md5</span> <span class="code_tt_space">&nbsp;</span><span id="afe3cb60c79e68b66c77_j000001010946153001529240204" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">true;</span> <span class="code_tt_space">&nbsp;</span><span id="149d7ffebeb55ab05d07_0076967001529240205j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">catch</span> <span class="code_tt_space">&nbsp;</span><span id="1167c87443e132c6048b_0117091001529240205j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">LOG_EMERG</span> <span class="code_tt_space">&nbsp;</span></div><div class="cb_15"></div></body></html>