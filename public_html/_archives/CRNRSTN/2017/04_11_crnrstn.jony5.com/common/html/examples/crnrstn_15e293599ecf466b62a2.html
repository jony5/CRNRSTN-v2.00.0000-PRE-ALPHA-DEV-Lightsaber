<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>CRNRSTN :: Code Example</title></head><body><p>Each environment can be configured to handle notices passed through the C<span class="the_R">R</span>NRSTN Suite :: logging class object. Beginning from line 71 below, the logging profiles for handling notices in each environment are defined. There are currently four (4) modes through which notices can be handled. If ":EMAIL" or "FILE" is specified as the $loggingMode, the appropriate $endPointDetails needs to be specified (either comma delimited email addresses or path+filename respectively).<br />
<br />
If using "FILE," ensure that C<span class="the_R">R</span>NRSTN has write privileges for the destination directory.</p><div id="crnrstn_15e293599ecf466b62a2_0" class="code_wrapper"><div id="lineNum_460497411" class="l_num">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br><br><br><br><br></div><div class="code_shell"><code>
<span class="code_str_qtd">&lt;?php</span><br><span CLASS="code_comment">
/*</span><br><span CLASS="code_comment">
// J5</span><br>
<span CLASS="code_comment">// Code is Poetry */</span><br>
<span id="e43e09b42c84b845c5a9_375898446j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> ( ! <span id="5b8a6983a64cb31813de_j000001011383454994" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">session_id</span>() ) @ <span id="6c399a691382212fff05_j000001011853294226" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">session_start</span>();<br>
<br>
<span CLASS="code_comment"># THE CRNRSTN SUITE :: STACK OF CLASS DEFINITIONS</span><br>
<span id="b7a73b3bf3e58d97abca_963062913j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>(<span class="code_str_qtd">'./_crnrstn.root.inc.php'</span>);<br>
<span id="b7a73b3bf3e58d97abca_1898131100j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/crnrstn/crnrstn.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CRNRSTN</span><br>
<span id="b7a73b3bf3e58d97abca_1063073771j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/logging/crnrstn.log.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// LOGGING</span><br>
<span id="b7a73b3bf3e58d97abca_1422513297j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/environmentals/crnrstn.env.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// ENVIRONMENTALS</span><br>
<span id="b7a73b3bf3e58d97abca_1102210254j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/security/crnrstn.ipauthmgr.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SECURITY</span><br>
<span id="b7a73b3bf3e58d97abca_1369615353j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/database/mysqli/crnrstn.mysqli.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// DATABASE</span><br>
<span id="b7a73b3bf3e58d97abca_454187776j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/soa/nusoap/nusoap.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// NUSOAP (3RD PARTY CLIENT/SERVER SOAP)</span><br>
<span id="b7a73b3bf3e58d97abca_865829034j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/soa/nusoap/class.wsdlcache.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// NUSOAP (3RD PARTY CLIENT/SERVER SOAP)</span><br>
<span id="b7a73b3bf3e58d97abca_2017331575j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/soa/crnrstn.soap.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SOAP MANAGEMENT</span><br>
<span id="b7a73b3bf3e58d97abca_1677602471j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/session/crnrstn.session.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SESSION MANAGEMENT</span><br>
<span id="b7a73b3bf3e58d97abca_1685309912j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/session/crnrstn.cookie.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// COOKIE MANAGEMENT</span><br>
<span id="b7a73b3bf3e58d97abca_1713165935j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($CRNRSTN_ROOT.<span class="code_str_qtd">'/_crnrstn/class/session/crnrstn.http.inc.php'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// HTTP MANAGEMENT</span><br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// INITIALIZE DEBUG MODE PARAMETER [0=OFF, 1=ON]</span><br>
$CRNRSTN_debugMode = 1; <br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// INSTANTIATE AN INSTANCE OF CRNRSTN BY PASSING A CONFIGURATION </span><br>
<span CLASS="code_comment">// SERIALIZATION STRING THAT WIIL BE UNIQUE TO THIS CONFIGURATION FILE AND</span><br>
<span CLASS="code_comment">// THE DEBUG MODE INTEGER (CRNRSTN_debugMode), WHERE 0=OFF AND 1=DEBUG ON.</span><br>
<span CLASS="code_comment">// IF YOU ARE RUNNING MULTIPLE CRNRSTN CONFIG FILES WITHIN YOUR WEB </span><br>
<span CLASS="code_comment">// APPLICATION, MAKE THE FIRST PARAMETER TO BE UNIQUE PER EACH CONFIG </span><br>
<span CLASS="code_comment">// FILE TO PREVENT RESOURCE CONTENTION WITHIN $_SESSION[ ].</span><br>
$oCRNRSTN = <span id="f109c58b6897e5839fe2_2057050502j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> crnrstn(<span class="code_str_qtd">'RrI5nh3'</span>, $CRNRSTN_debugMode);<br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// CONFIGURE CRNRSTN FOR THE FOLLOWING HOSTING ENVIRONMENTS</span><br>
$oCRNRSTN-&gt;addEnvironment(<span class="code_str_qtd">'LOCALHOST_MY_OLD_MAC_TOWER'</span>, <span id="b340155e95c6efe29beb_1192531314j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> &amp; ~<span id="5340722603173e83b56b_j00000101469805710" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_NOTICE</span>);<br>
$oCRNRSTN-&gt;addEnvironment(<span class="code_str_qtd">'PREPROD'</span>, <span id="b340155e95c6efe29beb_1557551907j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> &amp; ~<span id="5340722603173e83b56b_j00000101355211423" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_NOTICE</span>);<br>
$oCRNRSTN-&gt;addEnvironment(<span class="code_str_qtd">'STAGE'</span>, <span id="b340155e95c6efe29beb_1732186743j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> &amp; ~<span id="5340722603173e83b56b_j00000101608585153" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_NOTICE</span> &amp; ~<span id="677c6f7f346ee775bcd5_j00000101306923021" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_STRICT</span>);<br>
$oCRNRSTN-&gt;addEnvironment(<span class="code_str_qtd">'PROD_01'</span>, <span id="b340155e95c6efe29beb_121872584j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> &amp; ~<span id="be48e4758132952ab363_j000001011400859925" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_DEPRECATED</span> &amp; ~<span id="677c6f7f346ee775bcd5_j000001011117173703" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_STRICT</span>);<br>
$oCRNRSTN-&gt;addEnvironment(<span class="code_str_qtd">'LOCALHOST_PC'</span>, <span id="b340155e95c6efe29beb_628929343j00000101" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> &amp; ~<span id="5340722603173e83b56b_j000001011211015640" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_NOTICE</span> &amp; ~<span id="677c6f7f346ee775bcd5_j00000101801748752" class="code_system_constants" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_STRICT</span>);<br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// INITIALIZE DATABASE AUTHENTICATION PROFILE(S) FOR EACH ENVIRONMENT</span><br>
<span CLASS="code_comment">// ** UNLESS A PATH TO DB CONFIG FILE IS PROVIDED AS THE 2nd PARAMETER, </span><br>
<span CLASS="code_comment">// HOST, UN, PWD &amp; DB ARE ALL REQUIRED parameters **</span><br>
<span CLASS="code_comment"># PROTIP :: Instead of relying on hard-coded configuration file based database </span><br>
<span CLASS="code_comment"># connections to manage connections to n+1 databases, db resource handles can also </span><br>
<span CLASS="code_comment"># be established dynamically by passing all authentication parameters through </span><br>
<span CLASS="code_comment"># the mysqli_connection_manager :: returnConnection() method.</span><br>
$oCRNRSTN-&gt;addDatabase(<span class="code_str_qtd">'LOCALHOST_PC'</span>,<span class="code_str_qtd">'C://path//to//config//file//_crnrstn.db.config.inc.php'</span>);<br>
$oCRNRSTN-&gt;addDatabase(<span class="code_str_qtd">'LOCALHOST_MY_OLD_MAC_TOWER'</span>,<span class="code_str_qtd">'localhost'</span>,<span class="code_str_qtd">'user_c_assets'</span>,<span class="code_str_qtd">'xxpasswordxx'</span>,<span class="code_str_qtd">'db_c_assets'</span>,80);<br>
$oCRNRSTN-&gt;addDatabase(<span class="code_str_qtd">'PREPROD'</span>,<span class="code_str_qtd">'preprod1.domain.com'</span>,<span class="code_str_qtd">'user_c_posts'</span>,<span class="code_str_qtd">'xxpasswordxx'</span>,<span class="code_str_qtd">'db_c_posts'</span>,80);<br>
$oCRNRSTN-&gt;addDatabase(<span class="code_str_qtd">'STAGE'</span>,<span class="code_str_qtd">'preprod2.domain.com'</span>,<span class="code_str_qtd">'user_c_demo'</span>,<span class="code_str_qtd">'xxpasswordxx'</span>,<span class="code_str_qtd">'db_c_demo'</span>,80);<br>
$oCRNRSTN-&gt;addDatabase(<span class="code_str_qtd">'PROD_01'</span>,<span class="code_str_qtd">'/var/www/html/config.database.secure/_crnrstn.db.config.inc.php'</span>);<br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// CHECK CONFIGURATION STATE IN SESSION</span><br>
$oCRNRSTN_ENV = <span id="f109c58b6897e5839fe2_52596031j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> crnrstn_environmentals($oCRNRSTN,<span class="code_str_qtd">'simple_configcheck'</span>);<br>
<span id="e43e09b42c84b845c5a9_1671513052j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(!$oCRNRSTN_ENV-&gt;isConfigured($oCRNRSTN)){<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// TRANSFER ANY LOG DEBUG OUTPUT</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;debugTransfer($oCRNRSTN_ENV-&gt;getDebug());<br>
<span CLASS="tab">&nbsp;</span><span id="fa4f03d67bd4dc9baa81_1177647199j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">unset</span>($oCRNRSTN_ENV);<br>
</code></div></div><blockquote>Now, let's configure the logging profile for each environment ::.</blockquote><div id="crnrstn_15e293599ecf466b62a2_1" class="code_wrapper"><div id="lineNum_1436051025" class="l_num">67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br><br><br><br><br></div><div class="code_shell"><code>
<br>
<br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CONFIGURE LOGGING PROFILES FOR THE FOLLOWING HOSTING ENVIRONMENTS</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;initLogging(<span class="code_str_qtd">'PREPROD'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SYSTEM DEFAULT ERROR LOGGING</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;initLogging(<span class="code_str_qtd">'LOCALHOST_MY_OLD_MAC_TOWER'</span>, <span class="code_str_qtd">'SCREEN'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SEND OUTPUT TO SCREEN</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;initLogging(<span class="code_str_qtd">'STAGE'</span>, <span class="code_str_qtd">'EMAIL'</span>,<span class="code_str_qtd">'email1@domain.com,email2@domain.com'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// EMAIL LOG TRANSACTION TO LIST OF COMMA DELIMITED EMAIL ACCOUNTS</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;initLogging(<span class="code_str_qtd">'PROD_01'</span>, <span class="code_str_qtd">'FILE'</span>,<span class="code_str_qtd">'/var/log/customlogs/crnrstnlogs.txt'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PATH TO FOLDER &amp; FILE WHERE LOG DATA WILL BE APPENDEED</span><br>
<span CLASS="tab">&nbsp;</span>$oCRNRSTN-&gt;initLogging(<span class="code_str_qtd">'LOCALHOST_PC'</span>, <span class="code_str_qtd">'DEFAULT'</span>);<span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SYSTEM DEFAULT ERROR LOGGING</span><br>
<br>
<br>
<span class="code_str_qtd">?&gt;</span><br>
</code></div></div><blockquote>To see a complete example of the C<span class="the_R">R</span>NRSTN Suite :: configuration file, click <a href="../../../classes/environmentals/" target="_self">here</a>. For a more tutorial-ish presentation of the progression through the same, click <a href="../../../classes/crnrstn/grantexclusiveaccess/" target="_self">here</a> for documentation and examples covering the next few lines.</blockquote><div strlen="15756" class="example_title_wrapper"><code style="color:#FF0000;">Figure 5.</code></div><div class="cb_15"></div><div class="comment_tt_wrapper"><span id="e43e09b42c84b845c5a9_0735486001529261959j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> <span class="code_tt_space">&nbsp;</span><span id="5b8a6983a64cb31813de_j000001010735744001529261959" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">session_id</span> <span class="code_tt_space">&nbsp;</span><span id="6c399a691382212fff05_j000001010736672001529261959" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">session_start</span> <span class="code_tt_space">&nbsp;</span><span id="b7a73b3bf3e58d97abca_0744708001529261959j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span> <span class="code_tt_space">&nbsp;</span><span id="f109c58b6897e5839fe2_0020424001529261960j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">new</span> <span class="code_tt_space">&nbsp;</span><span id="b340155e95c6efe29beb_0034132001529261960j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_ALL</span> <span class="code_tt_space">&nbsp;</span><span id="5340722603173e83b56b_j000001010035427001529261960" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_NOTICE</span> <span class="code_tt_space">&nbsp;</span><span id="677c6f7f346ee775bcd5_j000001010043887001529261960" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_STRICT</span> <span class="code_tt_space">&nbsp;</span><span id="be48e4758132952ab363_j000001010047949001529261960" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">E_DEPRECATED</span> <span class="code_tt_space">&nbsp;</span><span id="fa4f03d67bd4dc9baa81_0169684001529261960j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">unset</span> <span class="code_tt_space">&nbsp;</span></div><div class="cb_15"></div></body></html>