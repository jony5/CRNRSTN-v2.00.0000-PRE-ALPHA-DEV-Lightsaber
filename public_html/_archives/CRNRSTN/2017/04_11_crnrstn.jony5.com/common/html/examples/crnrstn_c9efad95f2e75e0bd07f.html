<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>CRNRSTN :: Code Example</title></head><body><p>In this example, a user authenticated session parameter is checked (line 14) through the invocation of <a href="../../../classes/session_manager/issetsessionparam/" target="_self">issetSessionParam()</a> in order to determine whether or not to provide access to the requested resource.<br />
<br />
If the user is not authenticated, the requested resource is stored in session through <a href="../../../classes/session_manager/setsessionparam/" target="_self">setSessionParam()</a> before redirecting the user to the sign in page. Upon successful authentication, the user can be returned to the originally requested resource...as it can be extracted from the PHP SESSION via <a href="../../../classes/session_manager/getsessionparam/" target="_self">getSessionParam()</a> at that time. In this way, a users experience can be enhanced through the proper and light application of PHP SESSION state management.</p><div id="example_scrollto_0" class="example_scrollto" onClick="initScrollTo_lnk(this,'http://192.168.172.132/crnrstn/documentation/classes/session_manager/issetsessionparam/?ns=session_manager');"><a href="#" target="_self">Link</a>.</div><div id="crnrstn_c9efad95f2e75e0bd07f_0" class="code_wrapper"><div id="lineNum_826021480" class="l_num">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br><br><br><br><br></div><div class="code_shell"><code>
<span class="code_str_qtd">&lt;?php</span><br><span CLASS="code_comment">
/*</span><br><span CLASS="code_comment">
// J5</span><br>
<span CLASS="code_comment">// Code is Poetry */</span><br>
<br>
<span id="b7a73b3bf3e58d97abca_360731509j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>(<span class="code_str_qtd">'./_crnrstn.root.inc.php'</span>);<span CLASS="tab">&nbsp;</span> <span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// PATH...i.e. &lt;?php $ROOT=&quot;../&quot;; ? &gt; </span><br>
<span id="b7a73b3bf3e58d97abca_1032431524j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($ROOT.<span class="code_str_qtd">'_crnrstn.config.inc.php'</span>);<span CLASS="tab">&nbsp;</span> <span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CRNRSTN CONFIGURATION FILE</span><br>
<span id="b7a73b3bf3e58d97abca_1906595851j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($ROOT.<span class="code_str_qtd">'user.inc.php'</span>);<span CLASS="tab">&nbsp;</span> <span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CUSTOM USER :: CLASS DEFINITION</span><br>
<span id="b7a73b3bf3e58d97abca_853161197j00000101" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span>($ROOT.<span class="code_str_qtd">'database.inc.php'</span>);<span CLASS="tab">&nbsp;</span> <span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// CUSTOM DATABASE INTEGRATION :: CLASS DEFINITION</span><br>
<br>
<span CLASS="code_comment">//</span><br>
<span CLASS="code_comment">// CHECK FOR SESSION PARAMETER EXISTENCE AS INDICATION OF USER AUTHORIZATION</span><br>
<span CLASS="code_comment">// FOR ACCESS TO REQUESTED RESOURCE</span><br>
<span id="e43e09b42c84b845c5a9_902656106j000001011" class="code_log_exp" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span>(!$oENV-&gt;oSESSION_MGR-&gt;issetSessionParam(<span class="code_str_qtd">'LOGIN_USER_PERMISSIONS_ID'</span>)){<br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// USER NOT AUTHORIZED TO ACCESS THIS PAGE. STORE REQUESTED RESOURCE TO TMP VAR</span><br>
<span CLASS="tab">&nbsp;</span>$tmp_self = <span id="3b2edfd71817df77a304_401944058j000001011" class="code_html_doc_type_tag" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">$_SERVER</span>[<span class="code_str_qtd">'PHP_SELF'</span>];<br>
<span CLASS="tab">&nbsp;</span>$tmp_self = <span id="d79f204d3a3300587e86_756317784j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">str_replace</span>(<span class="code_str_qtd">'index.php'</span>, <span class="code_str_qtd">''</span>, $tmp_self);<br>
<span CLASS="tab">&nbsp;</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">//</span><br>
<span CLASS="tab">&nbsp;</span><span CLASS="code_comment">// SET LANDING PAGE TO TMP VAR...FOR REDIRECT AFTER SUCCESSFUL LOGIN.</span><br>
<span CLASS="tab">&nbsp;</span>$oENV-&gt;oSESSION_MGR-&gt;setSessionParam(<span class="code_str_qtd">'LANDINGPAGE'</span>,<span class="code_str_qtd">'http://'</span>.<span id="3b2edfd71817df77a304_840098352j00000101" class="code_html_doc_type_tag" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">$_SERVER</span>[HTTP_HOST'</span>].$tmp_self);<br>
<br>
<span CLASS="tab">&nbsp;</span><span id="34ffd86b3acf424082c8_482558593j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">header</span>(<span class="code_str_qtd">"Location: "</span>.$oUSER-&gt;getEnvParam('ROOT_PATH_CLIENT_HTTP').'crnrstn.jony5.com/account/signin/');<br>
<span CLASS="tab">&nbsp;</span><span id="281cc27eeca1929efeb1_1014949309j000001011" class="code_sysfunc_call" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">exit</span>();<br>
}<br>
<br>
<span class="code_str_qtd">?&gt;</span><br>
</code></div></div><div class="example_title_wrapper"><code style="color:#FF0000;">Figure 30.</code></div><div class="cb_15"></div><div class="comment_tt_wrapper"><span id="b7a73b3bf3e58d97abca_0005777001459924214j00000101" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">require</span> <span class="code_tt_space">&nbsp;</span><span id="e43e09b42c84b845c5a9_0852628001459924214j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">if</span> <span class="code_tt_space">&nbsp;</span><span id="3b2edfd71817df77a304_0037199001459924215j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">$_SERVER</span> <span class="code_tt_space">&nbsp;</span><span id="d79f204d3a3300587e86_0075227001459924215j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">str_replace</span> <span class="code_tt_space">&nbsp;</span><span id="34ffd86b3acf424082c8_0315014001459924215j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">header</span> <span class="code_tt_space">&nbsp;</span><span id="281cc27eeca1929efeb1_0385334001459924215j000001011" class="tt_agg_extract" onMouseOver="ttMsOvr(this);" onMouseOut="ttMsOut(this);">exit</span> <span class="code_tt_space">&nbsp;</span></div><div class="cb_15"></div></body></html>